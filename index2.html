<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Assembly Map</title>
 	    <style>
  #map_canvas { width: 610px; height: 400px; }
        </style>
 	  
<!--Load the AJAX API-->
<script type="text/javascript" src="http://www.google.com/jsapi"></script>        
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="http://geoxml3.googlecode.com/svn/branches/polys/geoxml3.js"></script>
<script type="text/javascript">
  google.load('visualization', '1', {'packages':['corechart', 'table', 'geomap']});
var map;

var layer;
var tableid =  "14iHz800h6FbXgdQOzqcYrIvTHMoHUV2nZsmq1rM"; //1265695;



function initialize() {
    geocoder = new google.maps.Geocoder();
  	map = new google.maps.Map(document.getElementById('map_canvas'), {
    center: new google.maps.LatLng(-38.416097, -63.616672),
    zoom: 6,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });
  
  layer = new google.maps.FusionTablesLayer();
    layer.setOptions({
        query: {
                select: 'geometry',
                from: tableid
               },
    suppressInfoWindows:true

  });
  layer.setMap(map);
  
     google.maps.event.addListener(layer, 'click', function(e){
      console.log(e);

     });

}


  		
{
   function changeMap() {
  var searchString = document.getElementById('searchString').value.replace("'", "\\'");
  if(searchString == "") {
    //var query="SELECT 'geometry' FROM " + tableid;
  } else {
    var query="SELECT 'geometry' FROM " + tableid + " WHERE name = '" + searchString + "'";

  layer.setOptions({
    query: {
            select: 'geometry',
            from: tableid,
            where:" name = '" + searchString + "'"
           }

    });
    
      
  }

layer.setMap(map);
  zoom2query(query);
  


  }

function changeMap2() {
  var searchString2 = document.getElementById('searchString2').value.replace("'", "\\'");
  if(searchString2 == "") {
    var query="SELECT 'geometry' FROM " + tableid2;
  } else {
    var query="SELECT 'geometry' FROM " + tableid2 + " WHERE 'name' = '" + searchString2 + "'";
  }
  //layer2.setQuery(query);
  zoom2query(query);
  
}

}


  var infowindow = new google.maps.InfoWindow();
		


function zoom2query(query) {
// zoom and center map on query results
  //set the query using the parameter
  var queryText = encodeURIComponent(query);
  var query = new google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq='  + queryText);
  console.log(query);

  //set the callback function
  query.send(zoomTo);
  console.log("test");
}

function zoomTo(response) {
if (!response) {
  alert('no response');
  return;
}
if (response.isError()) {
  alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
  return;
} 
  FTresponse = response;
  //for more information on the response object, see the documentation
  //http://code.google.com/apis/visualization/documentation/reference.html#QueryResponse
  numRows = response.getDataTable().getNumberOfRows();
  numCols = response.getDataTable().getNumberOfColumns();
  
     var kml =  FTresponse.getDataTable().getValue(0,0);
     // create a geoXml3 parser for the click handlers
     var geoXml = new geoXML3.parser({
                    map: map,
		    zoom: false
                });

     geoXml.parseKmlString("<Placemark>"+kml+"</Placemark>");
     //console.log(kml);
     geoXml.docs[0].gpolygons[0].setMap(null);
     console.log(geoXml.docs[0].gpolygons[0].bounds);
     map.fitBounds(geoXml.docs[0].gpolygons[0].bounds);


 /* var bounds = new google.maps.LatLngBounds();
  for(i = 0; i < numRows; i++) {
      var point = new google.maps.LatLng(
          parseFloat(response.getDataTable().getValue(i, 0)),
          parseFloat(response.getDataTable().getValue(i, 1)));
      bounds.extend(point);
  }
  // zoom to the bounds
  map.fitBounds(bounds);*/

}



        </script>
          <body onload="initialize();">
 	  
          <span class="style26 style53 style45 style59"><strong>Current View: Assembly Districts</strong></span>
 	    <form> 
 	    <span class="style51"><span class="style49">Show</span>:</span> 
 	  
 	    <input type="checkbox" value="1aYO7xw3Ur7CeBtQ7NBLPnWJ4hx8-RM_vzMPLapk" id="layer" checked="checked" 
onclick="changeLayer(this.value);">
          <span class="style55">New Assembly Districts</span><br> 
  <label><span class="style58">Select Assembly District</span> </label>
  <select id="searchString" onChange="changeMap(this.value);">
    <option value="">--All Districts--</option>
    <option value="LA PLATA">1</option>
    <option value="VILLARINO">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    <option value="24">24</option>
    <option value="25">25</option>
    <option value="26">26</option>
    <option value="27">27</option>
    <option value="28">28</option>
    <option value="29">29</option>
    <option value="30">30</option>
    <option value="31">31</option>
    <option value="32">32</option>
    <option value="33">33</option>
    <option value="34">34</option>
    <option value="35">35</option>
    <option value="36">36</option>
    <option value="37">37</option>
    <option value="38">38</option>
    <option value="39">39</option>
    <option value="40">40</option>
    <option value="41">41</option>
    <option value="42">42</option>
    <option value="43">43</option>
    <option value="44">44</option>
    <option value="45">45</option>
    <option value="46">46</option>
    <option value="47">47</option>
    <option value="48">48</option>
    <option value="49">49</option>
    <option value="50">50</option>
    <option value="51">51</option>
    <option value="52">52</option>
    <option value="53">53</option>
    <option value="54">54</option>
    <option value="55">55</option>
    <option value="56">56</option>
    <option value="57">57</option>
    <option value="58">58</option>
    <option value="59">59</option>
    <option value="60">60</option>
    <option value="61">61</option>
    <option value="62">62</option>
    <option value="63">63</option>
    <option value="64">64</option>
    <option value="65">65</option>
    <option value="66">66</option>
    <option value="67">67</option>
    <option value="68">68</option>
    <option value="69">69</option>
    <option value="70">70</option>
    <option value="71">71</option>
    <option value="72">72</option>
    <option value="73">73</option>
    <option value="74">74</option>
    <option value="75">75</option>
    <option value="76">76</option>
    <option value="77">77</option>
    <option value="78">78</option>
    <option value="79">79</option>
    <option value="80">80</option>
  </select>
  <div><br>
  <span class="headlines"><img src="../graphics/fate_blue.gif" alt="" width="380" height="3"></span><br> 
 	   <span class="style51 style49">Show:</span> 
 	   <input type="checkbox" value="1261953" id="layer2" checked="checked"
onclick="changeLayer(this.value);">
        <span class="style55">Existing Assembly Districts</span><br>
        <span class="style49"> <span class="style45">
        <label><em>Select Assembly Member</em> </label>
        </span> </span>
<select id="searchString2" onChange="changeMap2(this.value);">
 	          <option value="">--All Members/Districts--</option>
 	          <option value="Achadjian, Katcho   33" value="35.286125,-120.659409">  >Achadjian, Katcho   33</option>
 	          <option value="Alejo, Luis A.   28">Alejo, Luis A.   28</option>
 	          <option value="Allen, Michael   7">Allen, Michael   7</option>
 	          <option value="Ammiano, Tom   13">Ammiano, Tom   13</option>
 	          <option value="Atkins, Toni   76">Atkins, Toni   76</option>
 	          <option value="Beall, Jim Jr.   24">Beall, Jim Jr.   24</option>
 	          <option value="Berryhill, Bill   26">Berryhill, Bill   26</option>
 	          <option value="Block, Marty   78">Block, Marty   78</option>
 	          <option value="Blumenfield, Bob   40">Blumenfield, Bob   40</option>
 	          <option value="Bonilla, Susan   11">Bonilla, Susan   11</option>
 	          <option value="Bradford, Steven   51">Bradford, Steven   51</option>
 	          <option value="Brownley, Julia   41">Brownley, Julia   41</option>
 	          <option value="Buchanan, Joan   15">Buchanan, Joan   15</option>
 	          <option value="Butler, Betsy   53">Butler, Betsy   53</option>
 	          <option value="Calderon, Charles M.   58">Calderon, Charles M.   58</option>
 	          <option value="Campos, Nora   23">Campos, Nora   23</option>
 	          <option value="Carter, Wilmer Amina   62">Carter, Wilmer Amina   62</option>
 	          <option value="Cedillo, Gilbert   45">Cedillo, Gilbert   45</option>
 	          <option value="Chesbro, Wesley   1">Chesbro, Wesley   1</option>
 	          <option value="Conway, Connie   34">Conway, Connie   34</option>
 	          <option value="Cook, Paul   65">Cook, Paul   65</option>
 	          <option value="Davis, Mike   48">Davis, Mike   48</option>
 	          <option value="Dickinson, Roger   9">Dickinson, Roger   9</option>
 	          <option value="Donnelly, Tim   59">Donnelly, Tim   59</option>
 	          <option value="Eng, Mike   49">Eng, Mike   49</option>
 	          <option value="Feuer, Mike   42">Feuer, Mike   42</option>
 	          <option value="Fletcher, Nathan   75">Fletcher, Nathan   75</option>
 	          <option value="Fong, Paul   22">Fong, Paul   22</option>
 	          <option value="Fuentes, Felipe   39">Fuentes, Felipe   39</option>
 	          <option value="Furutani, Warren T.   55">Furutani, Warren T.   55</option>
 	          <option value="Gaines, Beth   4">Gaines, Beth   4</option>
 	          <option value="Galgiani, Cathleen   17">Galgiani, Cathleen   17</option>
 	          <option value="Garrick, Martin   74">Garrick, Martin   74</option>
 	          <option value="Gatto, Mike   43">Gatto, Mike   43</option>
 	          <option value="Gordon, Richard S.   21">Gordon, Richard S.   21</option>
 	          <option value="Gorell, Jeff   37">Gorell, Jeff   37</option>
 	          <option value="Grove, Shannon L.   32">Grove, Shannon L.   32</option>
 	          <option value="Hagman, Curt   60">Hagman, Curt   60</option>
 	          <option value="Halderman, Linda   29">Halderman, Linda   29</option>
 	          <option value="Hall, Isadore III   52">Hall, Isadore III   52</option>
 	          <option value="Harkey, Diane L.   73">Harkey, Diane L.   73</option>
 	          <option value="Hayashi, Mary   18">Hayashi, Mary   18</option>
 	          <option value="Hern ndez, Roger   57">Hern ndez, Roger   57</option>
 	          <option value="Hill, Jerry   19">Hill, Jerry   19</option>
 	          <option value="Huber, Alyson   10">Huber, Alyson   10</option>
 	          <option value="Hueso, Ben   79">Hueso, Ben   79</option>
 	          <option value="Huffman, Jared   6">Huffman, Jared   6</option>
 	          <option value="Jeffries, Kevin   66">Jeffries, Kevin   66</option>
 	          <option value="Jones, Brian W.   77">Jones, Brian W.   77</option>
 	          <option value="Knight, Steve   36">Knight, Steve   36</option>
 	          <option value="Lara, Ricardo   50">Lara, Ricardo   50</option>
 	          <option value="Logue, Dan   3">Logue, Dan   3</option>
 	          <option value="Lowenthal, Bonnie   54">Lowenthal, Bonnie   54</option>
 	          <option value="Ma, Fiona   12">Ma, Fiona   12</option>
 	          <option value="Mansoor, Allan R.   68">Mansoor, Allan R.   68</option>
 	          <option value="Mendoza, Tony   56">Mendoza, Tony   56</option>
 	          <option value="Miller, Jeff   71">Miller, Jeff   71</option>
 	          <option value="Mitchell, Holly J.   47">Mitchell, Holly J.   47</option>
 	          <option value="Monning, William W.   27">Monning, William W.   27</option>
 	          <option value="Morrell, Mike   63">Morrell, Mike   63</option>
 	          <option value="Nestande, Brian   64">Nestande, Brian   64</option>
 	          <option value="Nielsen, Jim   2">Nielsen, Jim   2</option>
 	          <option value="Norby, Chris   72">Norby, Chris   72</option>
 	          <option value="Olsen, Kristin   25">Olsen, Kristin   25</option>
 	          <option value="Pan, Richard   5">Pan, Richard   5</option>
 	          <option value="Perea, Henry T.   31">Perea, Henry T.   31</option>
 	          <option value="Portantino, Anthony   44">Portantino, Anthony   44</option>
 	          <option value="P‚rez, John A.   46">Perez, John A.   46</option>
 	          <option value="P‚rez, V. Manuel   80">Perez, V. Manuel   80</option>
 	          <option value="Silva, Jim   67">Silva, Jim   67</option>
 	          <option value="Skinner, Nancy   14">Skinner, Nancy   14</option>
 	          <option value="Smyth, Cameron   38">Smyth, Cameron   38</option>
 	          <option value="Solorio, Jose   69">Solorio, Jose   69</option>
 	          <option value="Swanson, Sandr‚ R.   16">Swanson, Sandr‚ R.   16</option>
 	          <option value="Torres, Norma J.   61">Torres, Norma J.   61</option>
 	          <option value="Valadao, David G.   30">Valadao, David G.   30</option>
 	          <option value="Wagner, Donald P.   70">Wagner, Donald P.   70</option>
 	          <option value="Wieckowski, Bob   20">Wieckowski, Bob   20</option>
 	          <option value="Williams, Das   35">Williams, Das   35</option>
 	          <option value="Yamada, Mariko   8">Yamada, Mariko   8</option>
        </select>
        <div>
<br>

<div id="map_canvas"></div>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"> 
</script> 
<script type="text/javascript"> 
_uacct = "UA-162157-1";
urchinTracker();
</script>
</body>
</html>
